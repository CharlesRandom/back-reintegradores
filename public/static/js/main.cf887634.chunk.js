(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(269)},129:function(e,t,a){},262:function(e,t,a){},269:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),o=a.n(l),c=(a(129),a(53)),i=a(54),s=a(59),u=a(55),m=a(60),h=a(277),p=a(276),g=a(275),d=a(271),E=a(272),f=a(274),w=a(33),v=a(270),y=E.a.Item,b=function(e){var t=e.login,a=e.handleText;return r.a.createElement("div",{className:"auth-form"},r.a.createElement(E.a,{layout:"vertical",method:"POST",onSubmit:t},r.a.createElement(y,null,r.a.createElement(f.a,{name:"email",onChange:a,prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})),r.a.createElement(y,null,r.a.createElement(f.a,{name:"password",onChange:a,prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),r.a.createElement(y,null,r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Log in"))),r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement("p",null,"Or ",r.a.createElement("a",{href:"/signup"},"register now!")))))},x=E.a.Item,S=function(e){var t=e.signup,a=e.handleText;return r.a.createElement("div",{className:"auth-form"},r.a.createElement(E.a,{layout:"vertical",method:"POST",onSubmit:t},r.a.createElement(x,null,r.a.createElement(f.a,{name:"name",onChange:a,prefix:r.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Name"})),r.a.createElement(x,null,r.a.createElement(f.a,{name:"email",onChange:a,prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email"})),r.a.createElement(x,null,r.a.createElement(f.a,{name:"password",onChange:a,prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"})),r.a.createElement(x,null,r.a.createElement("div",{className:"d-flex jcc aic"},r.a.createElement(v.a,{type:"primary",htmlType:"submit"},"Sign up")))))},O=a(63),j=a.n(O),T="http://localhost:3000/auth",k=function(e){return j.a.post(T+"/signup",e,{}).then(function(e){return e.data}).catch(function(e){return e.response})},C=function(e){return j.a.post(T+"/login",e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},N=function(e){return j.a.get(T+"/profile/"+e,{withCredentials:!0}).then(function(e){return e.data}).catch(function(e){return e.response})},I=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{},loading:!1},a.authError=function(e){g.a.error(e),a.setState({loading:!1})},a.signup=function(e){a.setState({loading:!0});var t=a.state.user;e.preventDefault(),k(t).then(function(e){e._id?a.props.history.push("/login"):(console.log("Something went wrong, try sign up again"),a.authError("Something went wrong, try sign up again"))}).catch(function(e){console.log(e),a.authError("Something went wrong, try sign up again")})},a.login=function(e){a.setState({loading:!0});var t=a.state.user;e.preventDefault(),C(t).then(function(e){e._id?(console.log("logged"),N(e._id).then(function(e){localStorage.setItem("loggedUser",JSON.stringify(e)),a.props.history.push("/profile")})):(console.log("Something went wrong, please check credentials"),a.authError("Something went wrong, please check credentials"))}).catch(function(e){console.log(e),a.authError("Something went wrong, please check credentials")})},a.handleText=function(e){var t=a.state.user,n=e.target.name,r=e.target.value;t[n]=r,a.setState({user:t})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname,t=this.signup,a=this.login,n=this.handleText,l=this.state.loading;return r.a.createElement("div",{className:"home"},r.a.createElement("div",null,r.a.createElement("div",{className:"search-container"},r.a.createElement("div",null,"/login"===e?r.a.createElement("div",null,l?r.a.createElement(d.a,{tip:"Loading..."},r.a.createElement(b,{login:a,handleText:n})):r.a.createElement(b,{login:a,handleText:n})):r.a.createElement("div",null,l?r.a.createElement(d.a,{tip:"Loading..."},r.a.createElement(S,{signup:t,handleText:n})):r.a.createElement(S,{signup:t,handleText:n}))))))}}]),t}(n.Component),P=function(){return r.a.createElement(h.a,null,r.a.createElement(p.a,{exact:!0,path:"/",component:I}),r.a.createElement(p.a,{path:"/signup",component:I}),r.a.createElement(p.a,{path:"/login",component:I}))},J=(a(262),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(P,null))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(273);a(264);a(266).config();o.a.render(r.a.createElement(function(){return r.a.createElement(L.a,null,r.a.createElement(J,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,2,1]]]);
//# sourceMappingURL=main.cf887634.chunk.js.map